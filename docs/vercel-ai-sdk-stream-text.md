Title: streamText

URL Source: https://sdk.vercel.ai/docs/reference/ai-sdk-core/stream-text

Warning: Target URL returned error 429: Too Many Requests

Markdown Content:
Streams text generations from a language model.

You can use the streamText function for interactive use cases such as chat bots and other real-time applications. You can also generate UI components with tools.

```
import { openai } from '@ai-sdk/openai';import { streamText } from 'ai';const { textStream } = streamText({  model: openai('gpt-4-turbo'),  prompt: 'Invent a new holiday and describe its traditions.',});for await (const textPart of textStream) {  process.stdout.write(textPart);}
```

The language model to use. Example: openai('gpt-4-turbo')

The system prompt to use that specifies the behavior of the model.

The input prompt to generate the text from.

### messages:

Array<CoreSystemMessage | CoreUserMessage | CoreAssistantMessage | CoreToolMessage\> | Array<UIMessage\>

A list of messages that represent a conversation. Automatically converts UI messages from the useChat hook.

CoreSystemMessage

The role for the system message.

The content of the message.

CoreUserMessage

The role for the user message.

### content:

string | Array<TextPart | ImagePart | FilePart\>

The content of the message.

TextPart

The type of the message part.

The text content of the message part.

ImagePart

The type of the message part.

### image:

string | Uint8Array | Buffer | ArrayBuffer | URL

The image content of the message part. String are either base64 encoded content, base64 data URLs, or http(s) URLs.

The mime type of the image. Optional.

FilePart

The type of the message part.

### data:

string | Uint8Array | Buffer | ArrayBuffer | URL

The file content of the message part. String are either base64 encoded content, base64 data URLs, or http(s) URLs.

The mime type of the file.

CoreAssistantMessage

The role for the assistant message.

### content:

string | Array<TextPart | ToolCallPart\>

The content of the message.

TextPart

The type of the message part.

The text content of the message part.

ToolCallPart

The type of the message part.

The name of the tool, which typically would be the name of the function.

### args:

object based on zod schema

Parameters generated by the model to be used by the tool.

CoreToolMessage

### content:

Array<ToolResultPart\>

The content of the message.

ToolResultPart

The type of the message part.

The id of the tool call the result corresponds to.

The name of the tool the result corresponds to.

The result returned by the tool after execution.

Whether the result is an error or an error message.

Maximum number of tokens to generate.

Temperature setting. The value is passed through to the provider. The range depends on the provider and model. It is recommended to set either \`temperature\` or \`topP\`, but not both.

Nucleus sampling. The value is passed through to the provider. The range depends on the provider and model. It is recommended to set either \`temperature\` or \`topP\`, but not both.

Only sample from the top K options for each subsequent token. Used to remove "long tail" low probability responses. Recommended for advanced use cases only. You usually only need to use temperature.

Presence penalty setting. It affects the likelihood of the model to repeat information that is already in the prompt. The value is passed through to the provider. The range depends on the provider and model.

Frequency penalty setting. It affects the likelihood of the model to repeatedly use the same words or phrases. The value is passed through to the provider. The range depends on the provider and model.

Sequences that will stop the generation of the text. If the model generates any of these sequences, it will stop generating further text.

The seed (integer) to use for random sampling. If set and supported by the model, calls will generate deterministic results.

Maximum number of retries. Set to 0 to disable retries. Default: 2.

An optional abort signal that can be used to cancel the call.

Maximum number of sequential LLM calls (steps), e.g. when you use tool calls. A maximum number is required to prevent infinite loops in the case of misconfigured tools. By default, it is set to 1.

### experimental_generateMessageId?:

() =\> string

Function used to generate a unique ID for each message. This is an experimental feature.

### experimental_continueSteps?:

boolean

Enable or disable continue steps. Disabled by default.

### experimental_telemetry?:

TelemetrySettings

Telemetry configuration. Experimental feature.

TelemetrySettings

Enable or disable telemetry. Disabled by default while experimental.

Enable or disable input recording. Enabled by default.

Enable or disable output recording. Enabled by default.

Identifier for this function. Used to group telemetry data by function.

### experimental_transform?:

StreamTextTransform | Array<StreamTextTransform\>

Optional stream transformations. They are applied in the order they are provided. The stream transformations must maintain the stream structure for streamText to work correctly.

StreamTextTransform

### transform:

(options: TransformOptions) =\> TransformStream<TextStreamPart<TOOLS\>, TextStreamPart<TOOLS\>\>

A transformation that is applied to the stream.

TransformOptions

A function that stops the stream.

The tools that are available.

### onChunk?:

(event: OnChunkResult) =\> Promise<void\> |void

Callback that is called for each chunk of the stream. The stream processing will pause until the callback promise is resolved.

OnChunkResult

The chunk of the stream.

TextStreamPart

The type to identify the object as text delta.

TextStreamPart

The type to identify the object as tool call.

The name of the tool, which typically would be the name of the function.

### args:

object based on zod schema

Parameters generated by the model to be used by the tool.

TextStreamPart

### type:

'tool-call-streaming-start'

Indicates the start of a tool call streaming. Only available when streaming tool calls.

The name of the tool, which typically would be the name of the function.

TextStreamPart

The type to identify the object as tool call delta. Only available when streaming tool calls.

The name of the tool, which typically would be the name of the function.

The text delta of the tool call arguments.

TextStreamPart

The type to identify the object as tool result.

The name of the tool, which typically would be the name of the function.

### args:

object based on zod schema

Parameters generated by the model to be used by the tool.

The result returned by the tool after execution has completed.

### experimental_output?:

Output

Experimental setting for generating structured outputs.

Output

Generate a JSON object of type OBJECT.

Options

The schema of the JSON object to generate.

### onStepFinish?:

(result: onStepFinishResult) =\> Promise<void\> | void

Callback that is called when a step is finished.

onStepFinishResult

### stepType:

"initial" | "continue" | "tool-result"

The type of step. The first step is always an "initial" step, and subsequent steps are either "continue" steps or "tool-result" steps.

### finishReason:

"stop" | "length" | "content-filter" | "tool-calls" | "error" | "other" | "unknown"

The reason the model finished generating the text for the step.

The token usage of the step.

TokenUsage

The total number of tokens in the prompt.

The total number of tokens in the completion.

The total number of tokens generated.

The full text that has been generated.

### warnings:

Warning\[\] | undefined

Warnings from the model provider (e.g. unsupported settings).

Response metadata.

Response

The response identifier. The AI SDK uses the ID from the provider response when available, and generates an ID otherwise.

The model that was used to generate the response. The AI SDK uses the response model from the provider response when available, and the model from the function call otherwise.

The timestamp of the response. The AI SDK uses the response timestamp from the provider response when available, and creates a timestamp otherwise.

True when there will be a continuation step with a continuation text.

### onFinish?:

(result: OnFinishResult) =\> Promise<void\> | void

Callback that is called when the LLM response and all request tool executions (for tools that have an \`execute\` function) are finished.

OnFinishResult

### finishReason:

"stop" | "length" | "content-filter" | "tool-calls" | "error" | "other" | "unknown"

The reason the model finished generating the text.

The token usage of the generated text.

TokenUsage

The total number of tokens in the prompt.

The total number of tokens in the completion.

The total number of tokens generated.

The full text that has been generated.

### warnings:

Warning\[\] | undefined

Warnings from the model provider (e.g. unsupported settings).

Response metadata.

Response

The response identifier. The AI SDK uses the ID from the provider response when available, and generates an ID otherwise.

The model that was used to generate the response. The AI SDK uses the response model from the provider response when available, and the model from the function call otherwise.

The timestamp of the response. The AI SDK uses the response timestamp from the provider response when available, and creates a timestamp otherwise.

### messages:

Array<ResponseMessage\>

The response messages that were generated during the call. It consists of an assistant message, potentially containing tool calls. When there are tool results, there is an additional tool message with the tool results that are available. If there are tools that do not have execute functions, they are not included in the tool results and need to be added separately.

Response information for every step. You can use this to get information about intermediate steps, such as the tool calls or the response headers.

### finishReason:

Promise<'stop' | 'length' | 'content-filter' | 'tool-calls' | 'error' | 'other' | 'unknown'\>

The reason why the generation finished. Resolved when the response is finished.

### usage:

Promise<CompletionTokenUsage\>

The token usage of the generated text. Resolved when the response is finished.

CompletionTokenUsage

The total number of tokens in the prompt.

The total number of tokens in the completion.

The total number of tokens generated.

The full text that has been generated. Resolved when the response is finished.

### request?:

Promise<RequestMetadata\>

Request metadata.

RequestMetadata

Raw request HTTP body that was sent to the provider API as a string (JSON should be stringified).

### response?:

Promise<ResponseMetadata\>

Response metadata. Resolved when the response is finished.

### warnings:

Warning\[\] | undefined

Warnings from the model provider (e.g. unsupported settings).

### steps:

Promise<Array<StepResult\>\>

Response information for every step. You can use this to get information about intermediate steps, such as the tool calls or the response headers.

StepResult

### stepType:

"initial" | "continue" | "tool-result"

The type of step. The first step is always an "initial" step, and subsequent steps are either "continue" steps or "tool-result" steps.

The generated text by the model.

### finishReason:

'stop' | 'length' | 'content-filter' | 'tool-calls' | 'error' | 'other' | 'unknown'

The reason the model finished generating the text.

### usage:

CompletionTokenUsage

The token usage of the generated text.

CompletionTokenUsage

The total number of tokens in the prompt.

The total number of tokens in the completion.

The total number of tokens generated.

Request metadata.

RequestMetadata

Raw request HTTP body that was sent to the provider API as a string (JSON should be stringified).

### response?:

ResponseMetadata

Response metadata.

### warnings:

Warning\[\] | undefined

Warnings from the model provider (e.g. unsupported settings).

True when there will be a continuation step with a continuation text.

### textStream:

AsyncIterable<string\> & ReadableStream<string\>

A text stream that returns only the generated text deltas. You can use it as either an AsyncIterable or a ReadableStream. When an error occurs, the stream will throw the error.

### fullStream:

AsyncIterable<TextStreamPart\> & ReadableStream<TextStreamPart\>

A stream with all events, including text deltas, tool calls, tool results, and errors. You can use it as either an AsyncIterable or a ReadableStream. Only errors that stop the stream, such as network errors, are thrown.

TextStreamPart

The type to identify the object as text delta.

TextStreamPart

The type to identify the object as tool call.

The name of the tool, which typically would be the name of the function.

### args:

object based on zod schema

Parameters generated by the model to be used by the tool.

TextStreamPart

### type:

'tool-call-streaming-start'

Indicates the start of a tool call streaming. Only available when streaming tool calls.

The name of the tool, which typically would be the name of the function.

TextStreamPart

The type to identify the object as tool call delta. Only available when streaming tool calls.

The name of the tool, which typically would be the name of the function.

The text delta of the tool call arguments.

TextStreamPart

The type to identify the object as tool result.

The name of the tool, which typically would be the name of the function.

### args:

object based on zod schema

Parameters generated by the model to be used by the tool.

The result returned by the tool after execution has completed.

TextStreamPart

Indicates the start of a new step in the stream.

The ID of the assistant message that started the step.

Information about the request that was sent to the language model provider.

RequestMetadata

Raw request HTTP body that was sent to the provider API as a string.

Warnings from the model provider (e.g. unsupported settings).

TextStreamPart

Indicates the end of the current step in the stream.

The ID of the assistant message that ended the step.

Optional log probabilities for tokens returned by some providers.

Information about the request that was sent to the language model provider.

RequestMetadata

Raw request HTTP body that was sent to the provider API as a string.

Warnings from the model provider (e.g. unsupported settings).

### response:

ResponseMetadata

Response metadata from the language model provider.

ResponseMetadata

The response identifier. The AI SDK uses the ID from the provider response when available, and generates an ID otherwise.

The model that was used to generate the response. The AI SDK uses the response model from the provider response when available, and the model from the function call otherwise.

The timestamp of the response. The AI SDK uses the response timestamp from the provider response when available, and creates a timestamp otherwise.

The token usage of the generated text.

TokenUsage

The total number of tokens in the prompt.

The total number of tokens in the completion.

The total number of tokens generated.

### finishReason:

'stop' | 'length' | 'content-filter' | 'tool-calls' | 'error' | 'other' | 'unknown'

The reason the model finished generating the text.

### experimental_providerMetadata?:

Record<string,Record<string,JSONValue\>\> | undefined

Optional metadata from the provider. The outer key is the provider name. The inner values are the metadata. Details depend on the provider.

True when there will be a continuation step with a continuation text.

TextStreamPart

The type to identify the object as finish.

### finishReason:

'stop' | 'length' | 'content-filter' | 'tool-calls' | 'error' | 'other' | 'unknown'

The reason the model finished generating the text.

The token usage of the generated text.

TokenUsage

The total number of tokens in the prompt.

The total number of tokens in the completion.

The total number of tokens generated.

### experimental_providerMetadata?:

Record<string,Record<string,JSONValue\>\> | undefined

Optional metadata from the provider. The outer key is the provider name. The inner values are the metadata. Details depend on the provider.

Optional log probabilities for tokens returned by some providers.

### response:

ResponseMetadata

Response metadata from the language model provider.

ResponseMetadata

The response identifier. The AI SDK uses the ID from the provider response when available, and generates an ID otherwise.

The model that was used to generate the response. The AI SDK uses the response model from the provider response when available, and the model from the function call otherwise.

The timestamp of the response. The AI SDK uses the response timestamp from the provider response when available, and creates a timestamp otherwise.

TextStreamPart

The type to identify the object as error.

Describes the error that may have occurred during execution.

### experimental_partialOutputStream:

AsyncIterableStream<PARTIAL_OUTPUT\>

A stream of partial outputs. It uses the \`experimental_output\` specification.

### pipeDataStreamToResponse:

(response: ServerResponse, options: PipeDataStreamToResponseOptions } =\> void

Writes stream data output to a Node.js response-like object. It sets a \`Content-Type\` header to \`text/plain; charset=utf-8\` and writes each stream data part as a separate chunk.

PipeDataStreamToResponseOptions

The response status code.

The response status text.

### getErrorMessage?:

(error: unknown) =\> string

A function to get the error message from the error object. By default, all errors are masked as "" for safety reasons.

Whether to send the usage information in the stream. Defaults to true.

### pipeTextStreamToResponse:

(response: ServerResponse, init?: ResponseInit =\> void

Writes text delta output to a Node.js response-like object. It sets a \`Content-Type\` header to \`text/plain; charset=utf-8\` and writes each text delta as a separate chunk.

ResponseInit

The response status code.

The response status text.

### toDataStream:

(options?: ToDataStreamOptions) =\> Response

Converts the result to a data stream.

ToDataStreamOptions

### getErrorMessage?:

(error: unknown) =\> string

A function to get the error message from the error object. By default, all errors are masked as "" for safety reasons.

Whether to send the usage information in the stream. Defaults to true.

### toDataStreamResponse:

(options?: ToDataStreamResponseOptions) =\> Response

Converts the result to a streamed response object with a stream data part stream. It can be used with the \`useChat\` and \`useCompletion\` hooks.

ToDataStreamResponseOptions

The response status code.

The response status text.

### getErrorMessage?:

(error: unknown) =\> string

A function to get the error message from the error object. By default, all errors are masked as "" for safety reasons.

Whether to send the usage information in the stream. Defaults to true.

### toTextStreamResponse:

(init?: ResponseInit) =\> Response

Creates a simple text stream response. Each text delta is encoded as UTF-8 and sent as a separate chunk. Non-text-delta events are ignored.

ResponseInit

The response status code.

The response status text.
